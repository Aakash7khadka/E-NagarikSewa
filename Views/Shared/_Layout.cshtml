@inject SignInManager<IdentityUser> signInManager
@inject UserManager<IdentityUser> userManager
@using System.Text.RegularExpressions;
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>@ViewData["Title"]</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    @*<link rel='stylesheet' type='text/css' media='screen' href='main.css'>*@
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200&family=Lato:wght@100;300&family=Open+Sans&display=swap" rel="stylesheet">
    @*<link rel="stylesheet" href="~/css/bootstrap.min.css" />*@
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <script src='main.js'></script>
</head>
<body>
    <div class="wrapper p-0 ">
        <!-- Main Nav -->
        <header class="navbar navbar-expand navbar-dark main_nav flex-column flex-md-row bd-navbar main_nav">
            <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="Bootstrap">
                <h6>E-Nagarik Sewa</h6>
            </a>



            <ul class="navbar-nav ml-md-auto">
                <li class="nav-item dropdown">
                    <a class="nav-item nav-link text-light dropdown-toggle mr-md-2" href="#" id="bd-versions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="bi bi-person-check fw-bolder"></i>
                        @if (signInManager.IsSignedIn(User))
                        {
                            var input = @User.Identity.Name;
                            <small> <i>@input.Substring(0, input.IndexOf("@"))</i></small>

                        }
                    </a>
                    <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="bd-versions">
                        @if (signInManager.IsSignedIn(User))
                        {

                            <form method="post" asp-action="Logout" asp-controller="Account">
                                <button type="submit" class="dropdown-item">Logout @User.Identity.Name</button>
                            </form>
                            <a class="dropdown-item" asp-controller="Administration" asp-action="ListRole" style="z-index:999"> Roles</a>
                        }

                        else
                        {

                            <a class="dropdown-item" asp-controller="Account" asp-action="Register" style="z-index:999">  Register</a>
                            <a class="dropdown-item" asp-controller="Account" asp-action="Login" style="z-index:999">  login</a>
                        }
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="https://getbootstrap.com/docs/3.4/">v3.4.1</a>
                        <a class="dropdown-item" href="https://getbootstrap.com/2.3.2/">v2.3.2</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="/docs/versions/">All versions</a>


                    </div>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-light pl-2 pr-2 mx-1 py-3 my-n2" href="https://github.com/twbs" target="_blank" rel="noopener" aria-label="GitHub">
                        <i class="bi bi-envelope fs-4"></i><span class="badge bg-secondary bg-danger fw-normal">4</span>
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-light  px-2 mx-1 py-3 my-n2" href="https://bootstrap-slack.herokuapp.com/" target="_blank" rel="noopener" aria-label="Slack">
                        <i class="bi bi-bell fs-4"></i><span class="badge bg-secondary bg-danger fw-normal">4</span>
                    </a>
                </li>


            </ul>
            <a class="btn btn-bd-download d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3 border border-light" href="/docs/4.6/getting-started/download/">Appointment</a>

        </header>

        <!-- Main Nav Ends -->

        

        <div class="row  content_area m-0 p-0">

           
                @if(User.Identity.IsAuthenticated)
                {
                    <div class="col-2 p-0 text-dark sidebar_main left">
                        <nav class="nav flex-column">
                            <a class="nav-link active" href="#section0"><i class="bi bi-menu-button-wide pr-3"></i>Home</a>
                            <a class="nav-link" href="#section1"><i class="bi bi-person-check pr-3 fw-bold"></i>Profile</a>

                            @if (User.IsInRole("Admin"))
                            {
                            <a class="nav-link" asp-controller="Administration" asp-action="ListRole"><i class="bi bi-card-checklist pr-3"></i>Roles</a>
                            }


                            <a class="nav-link" asp-controller="Attendance" asp-action="Index"><i class="bi bi-card-checklist pr-3"></i>Attendance</a>
                        </nav>
                    </div>
                }
            
            <div class="col-10 right">
                <div class="container-fluid">
                    @RenderBody()
                </div>
            </div>
        </div>
            </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="~/lib/jquery/jquery.js"></script>
    <script src="~/lib/jquery-validate/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="https://kit.fontawesome.com/6d51dbda3a.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(document).on('click','.sidebar_main a',function(){
          $(this).addClass('active').siblings().removeClass('active')
      })
    </script>
</body>
</html>